<!DOCTYPE html>
<html lang="sv">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="admin.css" />
  <script defer type="module" src="./admin.js"></script>

  <title>ella | Admin</title>
</head>

<body>

  <header class="top-header">
    <img class="top-logo" src="../assets/ELLA header.png" alt="Logo small" />
    <div class="user-actions">
      <div class="user-box">
        <span class="user-icon">游녻</span>
        <span class="user-label" id="username"></span>
        <span class="user-role admin" id="user-role">Admin</span>
      </div>
      <button class="logout-btn" id="logout-btn">Logga ut</button>
    </div>
  </header>

  <main class="admin-layout">
    <aside class="admin-sidebar">
      <nav class="sidebar-nav">
        <button class="sidebar-item active" data-panel="dashboard">
          <span class="sidebar-icon">游늵</span>
          <span class="sidebar-label">칐versikt</span>
        </button>
        <button class="sidebar-item" data-panel="rooms">
          <span class="sidebar-icon">游뛁</span>
          <span class="sidebar-label">Rum</span>
        </button>
        <button class="sidebar-item" data-panel="bookings">
          <span class="sidebar-icon">游늰</span>
          <span class="sidebar-label">Bokningar</span>
        </button>
        <button class="sidebar-item" data-panel="users">
          <span class="sidebar-icon">游논</span>
          <span class="sidebar-label">Anv칛ndare</span>
        </button>
      </nav>
    </aside>

    <!-- ========================= -->
    <!-- ADMIN CONTENT -->
    <!-- ========================= -->
    <div class="admin-content">

      <!-- ========================= -->
      <!-- 칐VERSIKT PANEL -->
      <!-- ========================= -->
      <section class="admin-panel active" id="overview-panel" data-panel="overview-panel">
        <h2>칐versikt</h2>

        <div class="summary-grid">
          <div class="summary-card">Totalt antal rum: <strong id="summary-total-rooms">0</strong></div>
          <div class="summary-card">Lediga rum: <strong id="summary-available-rooms">0</strong></div>
          <div class="summary-card">Aktiva bokningar: <strong id="summary-active-bookings">0</strong></div>
          <div class="summary-card">Totala bokningar: <strong id="summary-total-bookings">0</strong></div>
        </div>
      </section>

      <!-- ========================= -->
      <!-- RUM PANEL -->
      <!-- ========================= -->
      <section class="admin-panel" data-panel="rooms-panel" style="display:none;">

        <div class="room-header-row">
          <h2>Rum</h2>
          <button class="add-room-btn" id="add-room-btn">+ L칛gg till rum</button>
        </div>

        <div id="student-room-list"></div>

        <dialog id="createRoomModal" class="modal">
          <div class="modal-content">
            <div class="modal-header">
              <h2>Skapa nytt rum</h2>
            </div>

            <form id="createRoomForm">
              <label for="roomLocation">Rumsnamn</label>
              <input type="text" id="roomLocation" name="location" placeholder="Kontor p친 칬verv친ningen">

              <label for="roomName">Rumsnummmer</label>
              <input type="text" id="roomName" name="name" required>

              <label for="roomType">Typ</label>
              <select id="roomType" name="type" required>
                <option value="">-- V칛lj typ --</option>
                <option value="classroom">Klassrum</option>
                <option value="lab">Lab</option>
                <option value="publicarea">Allm칛n yta</option>
              </select>

              <label for="roomCapacity">Kapacitet</label>
              <input type="number" id="roomCapacity" name="capacity" required min="1">

              <label for="roomAssets">Utrustning i lokalen</label>
              <input type="text" id="roomAssets" name="assets" placeholder="Exempel: Projektor, Whiteboard">

              <label for="roomFloor">V친ning</label>
              <input type="number" id="roomFloor" name="floor" placeholder="V친ning 1, 2, etc.">

              <div class="modal-actions">
                <button type="button" class="btn-secondary" data-close-modal="createRoomModal">Avbryt</button>
                <button type="submit" class="btn-primary">Skapa Rum</button>
              </div>
            </form>
          </div>
        </dialog>
        
      </section>

      <!-- ========================= -->
      <!-- BOKNINGAR PANEL -->
      <!-- ========================= -->
      <section class="admin-panel" data-panel="bookings-panel" style="display:none;">
        <div class="booking-header">
          <div class="header-top">
            <h2>Bokningshantering</h2>
          </div>

          <div class="booking-tabs">
            <button class="tab-btn active" id="tab-upcoming">Kommande</button>
            <button class="tab-btn" id="tab-history">Historik</button>

            <label class="toggle-label">
              <input type="checkbox" id="show-cancelled" />
              Visa avbokade
            </label>
          </div>
        </div>

        <div class="booking-scroll" id="admin-booking-list">
          <p>Laddar bokningar...</p>
        </div>
      </section> <!-- bookings-panel -->

      <!-- ========================= -->
      <!-- ANV츿NDARE PANEL -->
      <!-- ========================= -->
      <section class="user-management" data-panel="users-panel" style="display:none;">
        <div class="section-header">
          <h2>칐versikt Anv칛ndare</h2>
          <button id="createUserBtn" class="btn-primary">+ Skapa ny anv칛ndare</button>
        </div>

        <div class="user-filter-bar">
          <select id="userDropdown">
            <option value="">V칛lj anv칛ndare...</option>
          </select>

          <select id="userRoleFilter">
            <option value="all">Alla roller</option>
            <option value="student">Student</option>
            <option value="teacher">L칛rare</option>
            <option value="admin">Admin</option>
          </select>

          <input type="text" id="userSearch" placeholder="S칬k anv칛ndare..." />

          <label class="show-all-users">
            <input type="checkbox" id="showAllUsers" />
            Visa alla anv칛ndare
          </label>
        </div>

        <div id="userList"></div>
      </section>

      <!-- ========================= -->
      <!-- MODAL: SKAPA ANV츿NDARE -->
      <!-- ========================= -->
      <dialog id="createUserModal">
        <div class="modal-content">
          <h3>Skapa ny anv칛ndare</h3>

          <form id="createUserForm">
            <div class="form-group">
              <label for="createUserName">Namn:</label>
              <input type="text" id="createUserName" name="name" required>
            </div>

            <div class="form-group">
              <label for="userEmail">E-post:</label>
              <input type="email" id="userEmail" name="email" required>
            </div>

            <div class="form-group">
              <label for="userPassword">L칬senord: </label>
              <input type="password" id="userPassword" name="password" required minlength="6">
            </div>

            <div class="form-group">
              <label for="userRole">Roll:</label>
              <select id="userRole" name="role" required>
                <option value="">-- V칛lj roll --</option>
                <option value="student">Student</option>
                <option value="teacher">L칛rare</option>
                <option value="admin">Admin</option>
              </select>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-confirm">Skapa</button>
              <button type="button" id="cancelCreateUser" class="btn-secondary">Avbryt</button>
            </div>
          </form>
        </div>
      </dialog>

      <div class="modal-backdrop" id="booking-modal" hidden role="dialog" aria-modal="true" aria-labelledby="booking-title">

  <div class="modal-content" onclick="event.stopPropagation()">
    <button class="modal-close" id="modal-close" aria-label="St칛ng dialog">칑</button>
    <h3 id="booking-title">Boka rum</h3>
    <p id="modal-room-label"></p>

    <form id="booking-form">
      <label for="booking-date">Datum</label>
      <input type="date" id="booking-date" name="date" required />

      <label for="start-hour">Starttid</label>
      <select id="start-hour" name="start_hour" required>
        <option value="">V칛lj starttid</option>
        <option value="08">08:00</option>
        <option value="09">09:00</option>
        <option value="10">10:00</option>
        <option value="11">11:00</option>
        <option value="12">12:00</option>
        <option value="13">13:00</option>
        <option value="14">14:00</option>
        <option value="15">15:00</option>
        <option value="16">16:00</option>
      </select>

      <label>L칛ngd</label>
      <div class="booking-grid">
        <div class="time-slot" data-hours="2">2h</div>
        <div class="time-slot" data-hours="4">4h</div>
        <div class="time-slot" data-hours="6">6h</div>
        <div class="time-slot" data-hours="8">8h</div>
      </div>

      <label for="notes">Anteckning</label>
      <textarea id="notes" name="notes" rows="3"></textarea>

      <button type="submit">Bekr칛fta bokning</button>
    </form>
  </div>
</div>


    </div> <!-- admin-layout -->
  </main>
</body>

</html>